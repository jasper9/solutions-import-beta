define(["underscore","backbone","model/gitHubFile","util/appDirCommon"],function(_,Backbone,GitHubFile,cu){var GitHubFileCollection=Backbone.Collection.extend({model:GitHubFile,myOptions:{userName:null,repoName:null,sha:"master",url:null},initialize:function(options){options=options||{};if(!_.isString(options.userName)||!_.isString(options.repoName)||!_.isString(options.sha))throw new Error("Can't fetch data missing userName, repoName or branch");_.extend(this.myOptions,options),this.myOptions.url=_.template("https://api.github.com/repos/<%= userName %>/<%= repoName %>/git/trees/<%= sha %>")(this.myOptions)},sync:function(method,model,options){var params=_.extend({type:"GET",timeout:3e4,processData:!0,url:this.myOptions.url,context:this,complete:function(data){},success:function(data){cu.log("success: "+data)},error:function(data){cu.log("error: "+data)},dataType:"json"},options);return $.ajax(params)},parse:function(response){return _(response.tree).map(function(serverFileData){return{path:serverFileData.path,sha:serverFileData.sha,theURL:serverFileData.url}})}});return GitHubFileCollection});